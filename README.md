# UDV Assigment Test

## Задача

Необходимо разработать back-end сервиса новостей, в котором будет REST API  для получения новостей с комментариями.

## Технологический стек

- Python 3.12
- FastAPI
- Pydantic
- SQLAlchemy
- PostgreSQL
- Pytest
- Docker

## Установка и запуск

### Запуск при помощи Docker

В файле .env указать имя контейнера базы данных.

Выполнить команду:

```jsx
docker-compose -f <имя docker-compose файла> up -d
```

## Запуск без Docker

1. В файле .env указать параметры подключения к БД PostgreSQL
2. Создайте виртуальное окружение.

`python -m venv /path/to/new/virtual/environment`

3. Установите зависимости

`pip install -r requirements.txt`

4. Запустите проект

`uvicorn main:app —reload`

5. Перейдите по адресу http://127.0.0.1:8000/docs, чтобы попасть в Swagger

## Запуск тестов

Выполнить в консоли команду:

`python -m pytest test/news_tests.py`

## Разработка

### Структура проекта

### **Директория `Comments`**

- **`comments.py`**: Эндпоинты создания комментариев.
- **`repository.py`**: Классы для моделей данных SQLAlchemy, описывающие структуру таблиц комментариев в базе данных, и классы репозиториев для взаимодействия с этими таблицами.
- **`schemas.py`**: Схемы Pydantic, используемые для валидации данных и сериализации запросов и ответов API.

### **Директория `Loader`**

- **`data_loader.py`**: Эндпоинты для инициализации базы данных и загрузки начальных данных комментариев и новостей из предоставленных JSON файлов.

### **Директория `News`**

- **`news.py`**: Эндпоинты для выполнения CRUD операций (создание, чтение, обновление, удаление) над новостями.
- **`repository.py`**: Классы моделей данных и репозиториев SQLAlchemy для управления данными новостей в базе данных.
- **`schemas.py`**: Схемы Pydantic для обработки и валидации запросов и ответов связанных с новостями.

### **Директория `Test`**

- **`news_tests.py`**: Модульные тесты для проверки функциональности API новостей.

### **Утилиты**

- **`repository.py`**: Общие реализации репозиториев для работы с базой данных, включая базовые операции CRUD.
- **`database.py`**: Настройки подключения к базе данных и утилиты для управления сессиями SQLAlchemy.
